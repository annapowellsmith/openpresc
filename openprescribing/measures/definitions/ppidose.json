{
  "name": "Higher dose Proton Pump Inhibitors (PPIs)",
  "title": "Higher dose Proton Prump Inhibitors, compared with prescribing of all PPIs (excluding liquids)",
  "description": "Prescribing of higher dose Proton Prump Inhibitors compared with prescribing of all PPIs (excluding liquids)",
  "numerator_short": "Higher dose PPI items (excluding liquids)",
  "denominator_short": "All PPI items (excluding liquids)",
  "y_label": "Higher dose PPI items vs all PPI items (excluding liquids)",
  "why_it_matters": [
    "PPIs are used to reduce acid levels in the stomach, in order to treat conditions such as gastro-oesophageal reflux disease. ",
    "NICE guidance recommends that the lowest dose is used to treat the symptoms. ",
    "Although PPIs are safe drugs, their use has been associated with an increase in a number of disorders, ",
    "including Clostridium difficile infection and a higher risk of community-aquired pneunmonia. ",
    "The doses of PPIs are defined in the <a href='https://www.nice.org.uk/guidance/cg184/chapter/appendix-a-dosage-information-on-proton-pump-inhibitors'> NICE guidance</a>."
  ],
  "tags": [
    "core",
    "gastrointestinal",
    "nice",
    "safety"
  ],
  "url": null,
  "is_percentage": true,
  "is_cost_based": false,
  "low_is_good": true,
  "numerator_type": "custom",
  "numerator_columns": "SUM(p.items) AS numerator",
  "numerator_from": [
    "{hscic}.normalised_prescribing p ",
    "INNER JOIN {dmd}.vmp vmp ON CONCAT(SUBSTR(p.bnf_code,0,9),'AA', SUBSTR(p.bnf_code,-2), SUBSTR(p.bnf_code,-2)) = vmp.bnf_code -- joins prescribing data to vmp table using generic BNF code \n",
    "INNER JOIN {dmd}.vpi AS vpi ON vmp.id = vpi.vmp -- joins vmp to vpi table to get ingredient strengths (strnt_nmrtr_val) \n",
    "INNER JOIN {dmd}.ont AS ont ON vmp.id = ont.vmp -- joins vmp to ont table to get formulation codes \n",
    "INNER JOIN {dmd}.ontformroute AS route ON ont.form = route.cd -- joins ont table to ontform table to get formulation names "
    ],
    "numerator_where": [
      "route.descr IN ",
        "(",
          "'capsule.oral',",
          "'capsulegastro-resistant.oral',",
          "'tablet.oral',",
          "'tabletchewable.oral',",
          "'tabletdispersiblegastro-resistant.oral',",
          "'tabletgastro-resistant.oral'",
        ") ## selects only solid dose form oral formulations \n",
      "AND",
      "(",
        "vpi.ing IN ",
        "(",
          "396047003,",
          "725856000,",
          "725855001",
        ")# esomeprazole, esomeprazole magnesium trihydrate, esomeprazole magnesium dihydrate (ALL strengths) (ing code) \n",
        "OR",
        "(",
          "vpi.ing = 86888004",
          "AND",
          "strnt_nmrtr_val/COALESCE(strnt_dnmtr_val,1) >15 # lansoprazole (strengths higher than 15mg) (ing code) \n",
        ")",
        "OR",
        "(",
          "vpi.ing = 387137007",
          "AND",
          "strnt_nmrtr_val/COALESCE(strnt_dnmtr_val,1) >10 # omeprazole, omeprazole magnesium (strengths higher than 10mg) (ing code) \n",
        ")",
        "OR",
        "(",
          "vpi.ing = 432408008",
          "AND",
          "strnt_nmrtr_val/COALESCE(strnt_dnmtr_val,1) >20 # pantoprazole sodium sesquihydrate (strengths higher than 20mg) (ing code) \n",
        ")",
        "OR",
        "(",
          "vpi.ing = 387013009 # rabeprazole sodium (strengths higher than 10mg) (ing code) \n",
          "AND",
          "strnt_nmrtr_val/COALESCE(strnt_dnmtr_val,1) >10",
        ")",
      ")"
    ],
  "denominator_type": "custom",
  "denominator_columns": "SUM(p.items) AS denominator",
  "denominator_from": [
    "{hscic}.normalised_prescribing p ",
    "INNER JOIN {dmd}.vmp vmp ON CONCAT(SUBSTR(p.bnf_code,0,9),'AA', SUBSTR(p.bnf_code,-2), SUBSTR(p.bnf_code,-2)) = vmp.bnf_code -- joins prescribing data to vmp table using generic BNF code \n",
    "INNER JOIN {dmd}.vpi AS vpi ON vmp.id = vpi.vmp -- joins vmp to vpi table to get ingredient strengths (strnt_nmrtr_val) \n",
    "INNER JOIN {dmd}.ont AS ont ON vmp.id = ont.vmp -- joins vmp to ont table to get formulation codes \n",
    "INNER JOIN {dmd}.ontformroute AS route ON ont.form = route.cd -- joins ont table to ontform table to get formulation names "
    ],
  "denominator_where": [
      "route.descr IN ('capsule.oral',",
      "'capsulegastro-resistant.oral',",
      "'tablet.oral',",
      "'tabletchewable.oral',",
      "'tabletdispersiblegastro-resistant.oral',",
      "'tabletgastro-resistant.oral') ## selects only solid dose form oral formulations \n",
      "AND",
      "(",

        "vpi.ing = 725856000 # esomeprazole magnesium trihydrate (all strengths) (ing code) \n",
        "OR vpi.ing = 725855001 # esomeprazole magnesium dihydrate (all strengths) (ing code) \n",
        "OR vpi.ing = 86888004 # lansoprazole (all strengths) (ing code) \n",
        "OR vpi.ing = 387137007 # omeprazole, omeprazole magnesium (all strengths) (ing code) \n",
        "OR vpi.ing = 396047003 # omeprazole(all strengths) (ing code) \n",
        "OR vpi.ing = 432408008 # pantoprazole sodium sesquihydrate (all strengths) (ing code) \n",
        "OR vpi.ing = 387013009  # rabeprazole sodium (all strengths) (ing code)",
      ")"
    ],
  "authored_by": "richard.croker@phc.ox.ac.uk",
  "checked_by": "andrew.brown@phc.ox.ac.uk",
  "date_reviewed": "2024-08-09",
  "next_review": "2025-08-09",
  "measure_complexity": "medium",
  "measure_type": "dmd",
  "radar_exclude": false
}
