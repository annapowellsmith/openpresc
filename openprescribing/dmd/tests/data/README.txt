This directory contains input data for import_dmd tests.  Most of the data is
derived from production data.

The files in dmd/1/ contain data about several VMPs, and their associated
VMPPs, AMPs, and AMPPs.

The VMPs are:

 * Diclofenac 2.32% gel (22480211000001104)
    * This is used to test that all associated objects get created correctly
    * There are three VMPPs:
        * Diclofenac 2.32% gel 30 gram
        * Diclofenac 2.32% gel 50 gram
        * Diclofenac 2.32% gel 100 gram
    * There are three AMPs:
        * Diclofenac 2.32% gel (Colorama Pharmaceuticals Ltd)
        * Diclofenac 2.32% gel (DE Pharmaceuticals)
        * Voltarol 12 Hour Emulgel P 2.32% gel (GlaxoSmithKline Consumer Healthcare)
    * There are seven AMPPs:
        * Only Voltarol is available in a 100 gram pack
    * The family has two BNF codes:
        * 1003020U0AAAIAI is the code for the VMP and all VMPPs
        * 1003020U0BBADAI is the code for the Voltarol AMP and its AMPPs
        * The generic AMPs and AMPPs are not given BNF codes in the mapping
        * See ../bnf_code_mapping/README.txt for details of the mapping

 * Adenosine 6mg/2ml solution for injection vials (35894711000001106)
    * This is used to test that the VMP's BNF code is set correctly
    * The VMP has no BNF code, but both its VMPPs have the same BNF code (0203020C0AAAAAA)

 * Pilocarpine hydrochloride 6% eye drops (347208002) and
   Pilocarpine hydrochloride 6% eye drops preservative free (36016311000001102)
    * These are used to test setting Presentation.dmd_name
    * They share the same BNF code (1106000X0AAAIAI) and a common name can be inferred

 * Coal tar 10% / Salicylic acid 5% in Aqueous cream (28946311000001106) and
   Coal tar solution 10% / Salicylic acid 5% in Aqueous cream (28789311000001103)
    * These are used to test setting Presentation.dmd_name
    * They share the same BNF code (1305020C0AAFVFV) and a common name cannot be inferred

 * Generic Nutrison liquid (3549611000001100)
    * This is used to test setting Presentation.dmd_name
    * The VMP and its VMPPs do not have a BNF code
    * The single AMP does have a BNF code (090402000BBDUA0)
    * All AMPPs share a BNF code (090402000BBHCA0) and a common name can be inferred

The files in dmd/2/ contain identical data, except that the VPID of the first
VMP has been changed from 22480211000001104 to 12345.  Additionally, this VMP
now has a VPIDPREV field, and all references to the old VPID have been updated

bnf_code_mapping/mapping.xlsx is a spreadsheet containing BNF code mappings for
the VMPs listed above and all related objects.

~~~

The files in dmd/1/ were generated by gen_test_dmd_data.py based on data
published by the BSA at https://isd.digital.nhs.uk/trud3/user/authenticated/group/0/pack/6/subpack/24/releases.
I used release NHSBSA_4.0.1_20190401000001, unzipped this into a temporary
directory, and ran:

$ python gen_test_dmd_data.py /tmp/dmd/ 1/ 22480211000001104,35894711000001106,347208002,36016311000001102,28946311000001106,28789311000001103,3549611000001100

The files in dmd/2/ were generated by copying those in dmd/1/, and making the
required changes manually.

bnf_code_mapping/mapping.xlsx was generated from 'Sept18 for Seb.xlsx', which
was sent to us by the BSA.

To do this, I imported the data in dmd/1 first:

$ ./manage.py import_dmd dmd/tests/data/dmd/1 'dmd/tests/data/bnf_code_mapping/Sept18 for Seb.xlsx' /tmp/logs

I then ran:

$ python gen_test_snomed_mapping.py 'Sept18 for Seb.xlsx' mapping.xlsx
