{
  "name": "Proportion of immediate release oral morphine prescribed as liquid",
  "title": "Immediate release oral morphine prescribed as liquid",
  "description": "Proportion of immediate release oral morphine prescribed as liquid formulations",
  "numerator_short": "OME liquid oral morphine formulations",
  "denominator_short": "OME all immediate release oral morphine formulations",
  "why_it_matters": ["tbc"   
  ],
  "tags": [
    "core",
    "opioids",
    "opportunities",
    "pain",
    "safety"
  ],
  "url": null,
  "is_percentage": false,
  "is_cost_based": false,
  "low_is_good": true,
  "numerator_type": "custom",
  "numerator_columns": "SUM(ome_dose) AS numerator",
  "numerator_from":[
    "{measures}.vw__opioids_total_dmd",
    "INNER JOIN {dmd}.vmp vmp ON CONCAT(SUBSTR(p.bnf_code,0,9),'AA', SUBSTR(p.bnf_code,-2), SUBSTR(p.bnf_code,-2)) = vmp.bnf_code -- joins prescribing data to vmp table using generic BNF code \n",
    "INNER JOIN {dmd}.vpi AS vpi ON vmp.id = vpi.vmp -- joins vmp to vpi table to get ingredient strengths (strnt_nmrtr_val) \n",
    "INNER JOIN {dmd}.ont AS ont ON vmp.id = ont.vmp -- joins vmp to ont table to get formulation codes \n",
    "INNER JOIN {dmd}.ontformroute AS route ON ont.form = route.cd -- joins ont table to ontform table to get formulation names "
  ],
  "numerator_where": [
    "vpi.ing = 60886004 AND route.descr = ('solution.oral') -- morphine oral solution preparations"
  ],
  "denominator_type": "custom",
  "denominator_columns": "SUM(ome_dose) AS denominator",
  "denominator_from":[
    "{measures}.vw__opioids_total_dmd",
    "INNER JOIN {dmd}.vmp vmp ON CONCAT(SUBSTR(p.bnf_code,0,9),'AA', SUBSTR(p.bnf_code,-2), SUBSTR(p.bnf_code,-2)) = vmp.bnf_code -- joins prescribing data to vmp table using generic BNF code \n",
    "INNER JOIN {dmd}.vpi AS vpi ON vmp.id = vpi.vmp -- joins vmp to vpi table to get ingredient strengths (strnt_nmrtr_val) \n",
    "INNER JOIN {dmd}.ont AS ont ON vmp.id = ont.vmp -- joins vmp to ont table to get formulation codes \n",
    "INNER JOIN {dmd}.ontformroute AS route ON ont.form = route.cd -- joins ont table to ontform table to get formulation names "
  ],
  "denominator_where": [
    "vpi.ing = 60886004 AND route.descr IN ('tablet.oral','tabletdispersible.oral','solution.oral') -- morphine oral solution, oraldispersible and immediate release oral preparations"
  ],
  "authored_by": "",
  "checked_by": "",
  "date_reviewed": "",
  "next_review": "",
  "measure_complexity": "medium",
  "measure_type": "dmd",
  "radar_exclude": false
}
